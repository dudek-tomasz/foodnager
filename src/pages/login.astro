---
/**
 * Login Page
 * 
 * Authentication page using AuthLayout and LoginForm component.
 * Features:
 * - Server-side rendering
 * - Redirect if already logged in (will be implemented with backend)
 * - Clean, centered design without navigation
 * - Query param support for redirect after login
 */

import AuthLayout from "@/layouts/AuthLayout.astro";
import LoginForm from "@/components/auth/LoginForm";

export const prerender = false;

// TODO: When implementing backend, add this logic:
// const { data: { session } } = await Astro.locals.supabase.auth.getSession();
// if (session) {
//   return Astro.redirect("/fridge");
// }

// Get redirect URL from query params (optional)
const redirectTo = Astro.url.searchParams.get("redirect") || "/fridge";
---

<AuthLayout title="Logowanie - Foodnager" description="Zaloguj siÄ™ do swojego konta Foodnager">
  <div class="space-y-6">
    <!-- Logo Section -->
    <div class="text-center space-y-2">
      <div class="flex justify-center">
        <span class="text-6xl">ğŸ³</span>
      </div>
      <h1 class="text-3xl font-bold tracking-tight text-neutral-900 dark:text-neutral-100">Foodnager</h1>
      <p class="text-neutral-600 dark:text-neutral-300">
        ZarzÄ…dzaj przepisami i wirtualnÄ… lodÃ³wkÄ…
      </p>
    </div>

    <!-- Login Form -->
    <LoginForm client:load redirectTo={redirectTo} />
  </div>
</AuthLayout>

