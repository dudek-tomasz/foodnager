---
/**
 * Forgot Password Page
 *
 * Password reset request page using AuthLayout and ForgotPasswordForm component.
 * Features:
 * - Server-side rendering with session check
 * - Redirects logged-in users to /fridge
 * - Clean, centered design without navigation
 * - Email-only form
 * - Success state with auto-redirect
 *
 * Following auth-spec.md US-001.7: Password recovery
 */

import AuthLayout from "@/layouts/AuthLayout.astro";
import ForgotPasswordForm from "@/components/auth/ForgotPasswordForm";

export const prerender = false;

// Check if user is already logged in (populated by middleware)
const user = Astro.locals.user;

// If user is already authenticated, redirect to fridge
// Why would a logged-in user need password reset?
if (user) {
  return Astro.redirect("/fridge");
}
---

<AuthLayout title="ZapomniaÅ‚eÅ› hasÅ‚a? - Foodnager" description="Zresetuj hasÅ‚o do konta Foodnager">
  <div class="space-y-6">
    <!-- Logo Section -->
    <div class="text-center space-y-2">
      <div class="flex justify-center">
        <span class="text-6xl">ðŸ”’</span>
      </div>
      <h1 class="text-3xl font-bold tracking-tight text-neutral-900 dark:text-neutral-100">Odzyskiwanie hasÅ‚a</h1>
      <p class="text-neutral-600 dark:text-neutral-300">PomoÅ¼emy Ci odzyskaÄ‡ dostÄ™p do konta</p>
    </div>

    <!-- Forgot Password Form -->
    <ForgotPasswordForm client:load />
  </div>
</AuthLayout>
