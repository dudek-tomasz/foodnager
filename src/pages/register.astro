---
/**
 * Register Page
 *
 * User registration page using AuthLayout and RegisterForm component.
 * Features:
 * - Server-side rendering with session check
 * - Redirects logged-in users to /fridge
 * - Clean, centered design without navigation
 * - Password strength validation
 * - Success state with auto-redirect to login
 *
 * Following auth-spec.md:
 * - Uses Astro.locals.user populated by middleware
 * - Public route (accessible without auth)
 * - Redirects authenticated users away
 */

import AuthLayout from "@/layouts/AuthLayout.astro";
import RegisterForm from "@/components/auth/RegisterForm";

export const prerender = false;

// Check if user is already logged in (populated by middleware)
const user = Astro.locals.user;

// If user is already authenticated, redirect to fridge
// Middleware also handles this, but double-check for safety
if (user) {
  return Astro.redirect("/fridge");
}
---

<AuthLayout title="Rejestracja - Foodnager" description="UtwÃ³rz nowe konto Foodnager">
  <div class="space-y-6">
    <!-- Logo Section -->
    <div class="text-center space-y-2">
      <div class="flex justify-center">
        <span class="text-6xl">ğŸ³</span>
      </div>
      <h1 class="text-3xl font-bold tracking-tight text-neutral-900 dark:text-neutral-100">Foodnager</h1>
      <p class="text-neutral-600 dark:text-neutral-300">Zacznij zarzÄ…dzaÄ‡ swojÄ… kuchniÄ…</p>
    </div>

    <!-- Register Form -->
    <RegisterForm client:load />
  </div>
</AuthLayout>
