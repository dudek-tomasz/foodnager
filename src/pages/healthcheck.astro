---
import { getSecret } from "astro:env/server";

// Prosty healthcheck bez zależności od Supabase
const env = {
  // Supabase
  hasSupabaseUrl: !!(getSecret("SUPABASE_URL") || import.meta.env.SUPABASE_URL),
  hasSupabaseKey: !!(getSecret("SUPABASE_KEY") || import.meta.env.SUPABASE_KEY),
  
  // OpenRouter (AI)
  hasOpenRouterApiKey: !!(getSecret("OPENROUTER_API_KEY") || import.meta.env.OPENROUTER_API_KEY),
  hasOpenRouterApiUrl: !!(getSecret("OPENROUTER_API_URL") || import.meta.env.OPENROUTER_API_URL),
  hasOpenRouterModel: !!(getSecret("OPENROUTER_MODEL") || import.meta.env.OPENROUTER_MODEL),
  hasTier3Timeout: !!(getSecret("TIER3_TIMEOUT_MS") || import.meta.env.TIER3_TIMEOUT_MS),
  
  // External Recipe API (optional)
  hasExternalRecipeApiKey: !!(getSecret("EXTERNAL_RECIPE_API_KEY") || import.meta.env.EXTERNAL_RECIPE_API_KEY),
  hasExternalRecipeApiUrl: !!(getSecret("EXTERNAL_RECIPE_API_URL") || import.meta.env.EXTERNAL_RECIPE_API_URL),
  
  // Environment
  nodeEnv: import.meta.env.MODE,
};
---

<!doctype html>
<html>
  <head>
    <title>Healthcheck</title>
  </head>
  <body>
    <h1>Healthcheck OK</h1>
    <pre>{JSON.stringify(env, null, 2)}</pre>
  </body>
</html>
